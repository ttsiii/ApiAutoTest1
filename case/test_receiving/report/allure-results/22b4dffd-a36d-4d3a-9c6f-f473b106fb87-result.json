{"name": "添加收货地址", "status": "failed", "statusDetails": {"message": "AssertionError", "trace": "self = <case.test_receiving.test_add_address.Test_DengLu object at 0x000001C476C57C88>\ncase_data = {'body': {'city': '杭州', 'defaultStatus': 0, 'detailAddress': '道长成仙之道', 'id': 0, ...}, 'case_name': 'case1_正确前台添加收货地址', 'expect': {'code': 200, 'except': '操作成功'}}\nreceiving_l = <api.admin.receiving_api.ReceivingApi object at 0x000001C476CF0278>\n\n    @allure.title(\"添加收货地址\")\n    @allure.step('添加收货地址-显示所有收货地址-删除收货地址')#测试报告显示步骤\n    @pytest.mark.usefixtures(\"del_address\")\n    @pytest.mark.parametrize(\"case_data\", data,ids=[data[i]['case_name'] for i in range(len(data))])  # 参数化测试用例\n    @decorate_log\n    def test_admin_login(self,case_data, receiving_l):\n        # time.sleep(3)\n        case_body = case_data['body']\n        \"\"\"请求添加收货地址\"\"\"\n        actual_data = receiving_l.add_shipping_address(city=case_body['city']\n                ,detailAddress=case_body['detailAddress']\n                ,name=case_body['name']\n                ,phoneNumber=case_body['phoneNumber']\n                ,postCode=case_body['postCode']\n                ,province=case_body['province']\n>               ,region=case_body['region'])\n\ntest_add_address.py:36: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n..\\..\\api\\admin\\receiving_api.py:54: in add_shipping_address\n    return self.send(url,body,method=method,x_token=self.token)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <api.admin.receiving_api.ReceivingApi object at 0x000001C476CF0278>\nurl = 'http://121.37.169.128:8201/mall-member/member/address/add?platform=test&time=1636079576565'\nbody = {'city': '杭州', 'defaultStatus': 0, 'detailAddress': '道长成仙之道', 'id': 0, ...}\nmethod = 'post'\nheaders = {'Authorization': 'Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX25hbWUiOiJhZG1pbjEiLCJzY29wZSI6WyJhbGwiXSwiaWQ...IAMsdiso8tQhm00TO5iOihQaeOkyr0a61P4a5y63terr15HJDB1lrLYgWSNX8nhunIjbkYLg33BG-p_cI', 'Content-Type': 'application/json'}\nsessions = ''\nx_token = 'eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX25hbWUiOiJhZG1pbjEiLCJzY29wZSI6WyJhbGwiXSwiaWQiOjI0MzQ1MjYsImV4cCI6MTYz...hvm4W-Uyit4FfpBdG3d7-bO4Hd_TpDaa0BqsvIAMsdiso8tQhm00TO5iOihQaeOkyr0a61P4a5y63terr15HJDB1lrLYgWSNX8nhunIjbkYLg33BG-p_cI'\n\n    def send(self,url,body = {},method= 0,headers = {},sessions = '',x_token = ''):\n      headers.update(self.default_header)\n      if x_token :\n          headers[\"Authorization\"] = \"Bearer \" +  x_token.strip('\"')  #strip() 方法用于移除字符串头尾指定的字符（默认为空格或换行符）或字符序列。\n          # print(\"token:\",headers[\"Authorization\"])\n      if sessions :\n          headers[\"Session\"] = \"Bearer \" + sessions\n    \n    \n      # self.create_request_log(url,method,body,headers)\n    \n      if method == \"get\":\n          result =  requests.get(url,params = body,headers = headers)\n      elif method == \"post\":\n          # result =  requests.post(url,data = json.dumps(body),headers=headers)\n          result =  requests.post(url,data = body,headers=headers)\n      elif method == \"patch\":\n          result = requests.patch(url,data = json.dumps(body),headers=headers)\n    \n      self.create_response_log(result.status_code,result.json())\n      self.create_request_log(url,method,body,headers)\n      # print(\"result.json()\",result.json()['code'])\n>     assert result.status_code == 200\nE     AssertionError\n\n..\\..\\api\\client.py:39: AssertionError"}, "steps": [{"name": "添加收货地址-显示所有收货地址-删除收货地址", "status": "failed", "statusDetails": {"message": "AssertionError\n", "trace": "  File \"D:\\ruanjian\\python\\lib\\site-packages\\allure_commons\\_allure.py\", line 157, in impl\n    return func(*a, **kw)\n  File \"D:\\daima\\xin-daima\\two-pytest-api-automation\\common\\logger.py\", line 67, in log\n    raise e\n  File \"D:\\daima\\xin-daima\\two-pytest-api-automation\\common\\logger.py\", line 63, in log\n    func(*args, **kwargs)\n  File \"D:\\daima\\xin-daima\\two-pytest-api-automation\\case\\test_receiving\\test_add_address.py\", line 36, in test_admin_login\n    ,region=case_body['region'])\n  File \"D:\\daima\\xin-daima\\two-pytest-api-automation\\api\\admin\\receiving_api.py\", line 54, in add_shipping_address\n    return self.send(url,body,method=method,x_token=self.token)\n  File \"D:\\daima\\xin-daima\\two-pytest-api-automation\\api\\client.py\", line 39, in send\n    assert result.status_code == 200\n"}, "steps": [{"name": "响应日志", "status": "passed", "parameters": [{"name": "status_code", "value": "400"}, {"name": "text", "value": "{'timestamp': '2021-11-05T02:32:55.230+00:00', 'status': 400, 'error': 'Bad Request', 'message': '', 'path': '/member/address/add'}"}], "start": 1636079576609, "stop": 1636079576610}, {"name": "请求日志", "status": "passed", "parameters": [{"name": "url", "value": "'http://121.37.169.128:8201/mall-member/member/address/add?platform=test&time=1636079576565'"}, {"name": "method", "value": "'post'"}, {"name": "body", "value": "{'city': '杭州', 'defaultStatus': 0, 'detailAddress': '道长成仙之道', 'id': 0, 'memberId': 0, 'name': '道长', 'phoneNumber': 18821768017, 'postCode': '713500', 'province': '中江省', 'region': '长藤市'}"}, {"name": "headers", "value": "{'Content-Type': 'application/json', 'Authorization': 'Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX25hbWUiOiJhZG1pbjEiLCJzY29wZSI6WyJhbGwiXSwiaWQiOjI0MzQ1MjYsImV4cCI6MTYzNjE2NTkxNCwiYXV0aG9yaXRpZXMiOlsi5YmN5Y-w5Lya5ZGYIl0sImp0aSI6ImE5ZWM1M2JjLTBlYmMtNDdlNy1iNGIzLTJkNGMzZjU4NjQ3MSIsImNsaWVudF9pZCI6InBvcnRhbC1hcHAifQ.ogav1hpWwFkb1JmsXF5EdQe00oury5VQxnNgLUDZtOILGzbd7DGVMhvm4W-Uyit4FfpBdG3d7-bO4Hd_TpDaa0BqsvIAMsdiso8tQhm00TO5iOihQaeOkyr0a61P4a5y63terr15HJDB1lrLYgWSNX8nhunIjbkYLg33BG-p_cI'}"}], "start": 1636079576610, "stop": 1636079576610}], "parameters": [{"name": "args", "value": "(<case.test_receiving.test_add_address.Test_DengLu object at 0x000001C476C57C88>,)"}, {"name": "case_data", "value": "{'case_name': 'case1_正确前台添加收货地址', 'body': {'city': '杭州', 'defaultStatus': 0, 'detailAddress': '道长成仙之道', 'id': 0, 'memberId': 0, 'name': '道长', 'phoneNumber': 18821768017, 'postCode': '713500', 'province': '中江省', 'region': '长藤市'}, 'expect': {'except': '操作成功', 'code': 200}}"}, {"name": "receiving_l", "value": "<api.admin.receiving_api.ReceivingApi object at 0x000001C476CF0278>"}], "start": 1636079576565, "stop": 1636079576623}], "attachments": [{"name": "log", "source": "4eb8fe1a-c09a-4974-b1c0-bb58ddaa3ead-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "case_data", "value": "{'case_name': 'case1_正确前台添加收货地址', 'body': {'city': '杭州', 'defaultStatus': 0, 'detailAddress': '道长成仙之道', 'id': 0, 'memberId': 0, 'name': '道长', 'phoneNumber': 18821768017, 'postCode': '713500', 'province': '中江省', 'region': '长藤市'}, 'expect': {'except': '操作成功', 'code': 200}}"}], "start": 1636079576565, "stop": 1636079576624, "uuid": "75511a01-9915-44dd-9137-ed66e06ab3d0", "historyId": "4e8a8a1ecfa1d7163fc98d4c2a77f5ed", "testCaseId": "12f33b8cdc13ffd38919b5830ed711c9", "fullName": "case.test_receiving.test_add_address.Test_DengLu#test_admin_login", "labels": [{"name": "feature", "value": "测试receiving模块"}, {"name": "story", "value": "添加收货地址功能"}, {"name": "parentSuite", "value": "case.test_receiving"}, {"name": "suite", "value": "test_add_address"}, {"name": "subSuite", "value": "Test_DengLu"}, {"name": "host", "value": "LAPTOP-9964GMTD"}, {"name": "thread", "value": "17748-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "case.test_receiving.test_add_address"}]}