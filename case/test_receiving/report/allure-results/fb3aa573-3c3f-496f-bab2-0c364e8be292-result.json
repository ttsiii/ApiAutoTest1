{"name": "添加收货地址", "status": "failed", "statusDetails": {"message": "AssertionError", "trace": "self = <case.test_receiving.test_add_address.Test_DengLu object at 0x00000241FC2BF780>\ncase_data = {'body': {'city': '杭州', 'defaultStatus': 0, 'detailAddress': '道长成仙之道', 'id': 0, ...}, 'case_name': 'case1_正确前台添加收货地址', 'expect': {'code': 200, 'except': '操作成功'}}\nreceiving_l = <api.admin.receiving_api.ReceivingApi object at 0x00000241FC303438>\n\n    @allure.title(\"添加收货地址\")\n    @allure.step('添加收货地址-显示所有收货地址-删除收货地址')#测试报告显示步骤\n    @pytest.mark.usefixtures(\"del_address\")\n    @pytest.mark.parametrize(\"case_data\", data,ids=[data[i]['case_name'] for i in range(len(data))])  # 参数化测试用例\n    @decorate_log\n    def test_admin_login(self,case_data, receiving_l):\n        # time.sleep(3)\n        case_body = case_data['body']\n        \"\"\"请求添加收货地址\"\"\"\n        actual_data = receiving_l.add_shipping_address(city=case_body['city']\n                ,detailAddress=case_body['detailAddress']\n                ,name=case_body['name']\n                ,phoneNumber=case_body['phoneNumber']\n                ,postCode=case_body['postCode']\n                ,province=case_body['province']\n>               ,region=case_body['region'])\n\ntest_add_address.py:36: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n..\\..\\api\\admin\\receiving_api.py:58: in add_shipping_address\n    return self.send(url,body,method=method,x_token=self.token)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <api.admin.receiving_api.ReceivingApi object at 0x00000241FC303438>\nurl = 'http://121.37.169.128:8201/mall-member/member/address/add?platform=test&time=1647925256188'\nbody = {'city': '杭州', 'defaultStatus': 0, 'detailAddress': '道长成仙之道', 'id': 0, ...}\nmethod = 'post'\nheaders = {'Authorization': 'Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX25hbWUiOiJhZG1pbiIsInNjb3BlIjpbImFsbCJdLCJpZCI...Ox8zAmvb5L-Wc_BnVF8WiNF-QP4dMMdV81AtDw6pGT_XAMg9_oeIayqtU_n78-7tSL9zTsrS_noBM34dI', 'Content-Type': 'application/json'}\nsessions = ''\nx_token = 'eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX25hbWUiOiJhZG1pbiIsInNjb3BlIjpbImFsbCJdLCJpZCI6MjQzNDQyNywiZXhwIjoxNjQ4...tBLpsduKb1DvUkqlZTUlqD1BQ0yojouRqhhhnOx8zAmvb5L-Wc_BnVF8WiNF-QP4dMMdV81AtDw6pGT_XAMg9_oeIayqtU_n78-7tSL9zTsrS_noBM34dI'\n\n    def send(self,url,body = {},method= {},headers = {},sessions = '',x_token = ''):\n    \n        headers.update(self.default_header)\n        # print(headers)\n        if x_token :\n          headers[\"Authorization\"] = \"Bearer \" +  x_token.strip('\"')  #strip() 方法用于移除字符串头尾指定的字符（默认为空格或换行符）或字符序列。\n          print(\"token:\",headers)\n        if sessions :\n          headers[\"Session\"] = \"Bearer \" + sessions\n    \n    \n        if method == \"get\":\n          result =  requests.get(url,params = body,headers = headers)\n        elif method == \"post\":\n          # result =  requests.post(url,data = json.dumps(body),headers=headers)\n          result =  requests.post(url,json = body,headers=headers)\n        elif method == \"patch\":\n          result = requests.patch(url,data = json.dumps(body),headers=headers)\n    \n        self.create_response_log(result.status_code,result.json())\n        self.create_request_log(url,method,body,headers)\n        # print(\"result.json()\",result.json()['code'])\n>       assert result.status_code == 200\nE       AssertionError\n\n..\\..\\api\\client.py:42: AssertionError"}, "steps": [{"name": "添加收货地址-显示所有收货地址-删除收货地址", "status": "failed", "statusDetails": {"message": "AssertionError\n", "trace": "  File \"D:\\ruanjian\\python\\lib\\site-packages\\allure_commons\\_allure.py\", line 157, in impl\n    return func(*a, **kw)\n  File \"D:\\daima\\xin-daima\\two-pytest-api-automation2\\common\\logger.py\", line 68, in log\n    raise e\n  File \"D:\\daima\\xin-daima\\two-pytest-api-automation2\\common\\logger.py\", line 64, in log\n    func(*args, **kwargs)\n  File \"D:\\daima\\xin-daima\\two-pytest-api-automation2\\case\\test_receiving\\test_add_address.py\", line 36, in test_admin_login\n    ,region=case_body['region'])\n  File \"D:\\daima\\xin-daima\\two-pytest-api-automation2\\api\\admin\\receiving_api.py\", line 58, in add_shipping_address\n    return self.send(url,body,method=method,x_token=self.token)\n  File \"D:\\daima\\xin-daima\\two-pytest-api-automation2\\api\\client.py\", line 42, in send\n    assert result.status_code == 200\n"}, "steps": [{"name": "响应日志", "status": "passed", "parameters": [{"name": "status_code", "value": "500"}, {"name": "text", "value": "{'timestamp': '2022-03-22T05:00:58.790+00:00', 'status': 500, 'error': 'Internal Server Error', 'message': '', 'path': '/member/address/add'}"}], "start": 1647925256965, "stop": 1647925256965}, {"name": "请求日志", "status": "passed", "parameters": [{"name": "url", "value": "'http://121.37.169.128:8201/mall-member/member/address/add?platform=test&time=1647925256188'"}, {"name": "method", "value": "'post'"}, {"name": "body", "value": "{'city': '杭州', 'defaultStatus': 0, 'detailAddress': '道长成仙之道', 'id': 0, 'memberId': 0, 'name': '道长', 'phoneNumber': 18821768017, 'postCode': '713500', 'province': '中江省', 'region': '长藤市'}"}, {"name": "headers", "value": "{'Content-Type': 'application/json', 'Authorization': 'Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX25hbWUiOiJhZG1pbiIsInNjb3BlIjpbImFsbCJdLCJpZCI6MjQzNDQyNywiZXhwIjoxNjQ4MDExNjU3LCJhdXRob3JpdGllcyI6WyLliY3lj7DkvJrlkZgiXSwianRpIjoiNzE0ODE0N2ItZTMyNi00MjcyLTg0NmQtY2Q2NGQ2MDZlMmNmIiwiY2xpZW50X2lkIjoicG9ydGFsLWFwcCJ9.pe9Vl63YWmtQEz5qK5DmxyknYxLvi_zaPG53f-JzG2Cx_TEJxst0etBLpsduKb1DvUkqlZTUlqD1BQ0yojouRqhhhnOx8zAmvb5L-Wc_BnVF8WiNF-QP4dMMdV81AtDw6pGT_XAMg9_oeIayqtU_n78-7tSL9zTsrS_noBM34dI'}"}], "start": 1647925256965, "stop": 1647925256965}], "parameters": [{"name": "args", "value": "(<case.test_receiving.test_add_address.Test_DengLu object at 0x00000241FC2BF780>,)"}, {"name": "case_data", "value": "{'case_name': 'case1_正确前台添加收货地址', 'body': {'city': '杭州', 'defaultStatus': 0, 'detailAddress': '道长成仙之道', 'id': 0, 'memberId': 0, 'name': '道长', 'phoneNumber': 18821768017, 'postCode': '713500', 'province': '中江省', 'region': '长藤市'}, 'expect': {'except': '操作成功', 'code': 200}}"}, {"name": "receiving_l", "value": "<api.admin.receiving_api.ReceivingApi object at 0x00000241FC303438>"}], "start": 1647925256188, "stop": 1647925256967}], "attachments": [{"name": "log", "source": "d2c04a17-1152-4f4e-99b5-a691665786f1-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "case_data", "value": "{'case_name': 'case1_正确前台添加收货地址', 'body': {'city': '杭州', 'defaultStatus': 0, 'detailAddress': '道长成仙之道', 'id': 0, 'memberId': 0, 'name': '道长', 'phoneNumber': 18821768017, 'postCode': '713500', 'province': '中江省', 'region': '长藤市'}, 'expect': {'except': '操作成功', 'code': 200}}"}], "start": 1647925256188, "stop": 1647925256967, "uuid": "2bca6816-fec7-4c3f-a96f-5664906b4169", "historyId": "4e8a8a1ecfa1d7163fc98d4c2a77f5ed", "testCaseId": "12f33b8cdc13ffd38919b5830ed711c9", "fullName": "case.test_receiving.test_add_address.Test_DengLu#test_admin_login", "labels": [{"name": "story", "value": "添加收货地址功能"}, {"name": "feature", "value": "测试receiving模块"}, {"name": "parentSuite", "value": "case.test_receiving"}, {"name": "suite", "value": "test_add_address"}, {"name": "subSuite", "value": "Test_DengLu"}, {"name": "host", "value": "LAPTOP-9964GMTD"}, {"name": "thread", "value": "28680-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "case.test_receiving.test_add_address"}]}